---
title: 2048
categories:
  - 笔试
tags:
  - 模拟
order: 2
---

# 2048

# 参考程序

```cpp
#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
ll a[40][40];
int v[40][40];
int op[50];
int main(){
    int t;
    cin>>t;
    while(t--){
        int c;
        cin>>c;
        for(int i=1;i<=c;i++){
            cin>>op[i];
        }
        int m,n;
        cin>>m>>n;
        for(int i=1;i<=m;i++){
            for(int j=1;j<=n;j++){
                cin>>a[i][j];
            }
        }
        for(int k=1;k<=c;k++){
            for(int i=1;i<=m;i++){
                for(int j=1;j<=n;j++){
                    v[i][j]=0;
                }
            }
            if(op[k]==0){
                for(int j=1;j<=n;j++){
                    for(int i=1;i<=m;i++){
                        if(a[i][j]==0) continue;
                        for(int ii=i;ii>1;ii--){
                            if(a[ii][j]==a[ii-1][j]){
                                if(v[ii-1][j]) break;
                                v[ii-1][j]=1;
                                a[ii-1][j]*=2;
                                a[ii][j]=0;
                                break;
                            }
                            else if(a[ii-1][j]==0){
                                a[ii-1][j]=a[ii][j];
                                a[ii][j]=0;
                            }
                            else break;
                        }
                    }
                }
            }
            else if(op[k]==2){
                for(int j=1;j<=n;j++){
                    for(int i=m;i>=1;i--){
                        if(a[i][j]==0) continue;
                        for(int ii=i;ii<m;ii++){
                            if(a[ii][j]==a[ii+1][j]){
                                if(v[ii+1][j]) break;
                                v[ii+1][j]=1;
                                a[ii+1][j]*=2;
                                a[ii][j]=0;
                                break;
                            }
                            else if(a[ii+1][j]==0){
                                a[ii+1][j]=a[ii][j];
                                a[ii][j]=0;
                            }
                            else break;
                        }
                    }
                }             
            }
            else if(op[k]==1){
                for(int i=1;i<=m;i++){
                    for(int j=1;j<=n;j++){
                        if(a[i][j]==0) continue;
                        for(int jj=j;jj>1;jj--){
                            if(a[i][jj]==a[i][jj-1]){
                                if(v[i][jj-1]) break;
                                v[i][jj-1]=1;
                                a[i][jj-1]*=2;
                                a[i][jj]=0;
                                break;
                            }
                            else if(a[i][jj-1]==0){
                                a[i][jj-1]=a[i][jj];
                                a[i][jj]=0;
                            }
                            else break;
                        }
                    }
                }
            }
            else{
                for(int i=1;i<=m;i++){
                    for(int j=n;j>=1;j--){
                        if(a[i][j]==0) continue;
                        for(int jj=j;jj<n;jj++){
                            if(a[i][jj]==a[i][jj+1]){
                                if(v[i][jj+1]) break;
                                v[i][jj+1]=1;
                                a[i][jj+1]*=2;
                                a[i][jj]=0;
                                break;
                            }
                            else if(a[i][jj+1]==0){
                                a[i][jj+1]=a[i][jj];
                                a[i][jj]=0;
                            }
                            else break;
                        }
                    }
                }
            }                
        }
        for(int i=1;i<=m;i++){
            for(int j=1;j<=n;j++){
                cout<<a[i][j]<<' ';
            }
            cout<<'\n';
        }
    }
    return 0;
}
```